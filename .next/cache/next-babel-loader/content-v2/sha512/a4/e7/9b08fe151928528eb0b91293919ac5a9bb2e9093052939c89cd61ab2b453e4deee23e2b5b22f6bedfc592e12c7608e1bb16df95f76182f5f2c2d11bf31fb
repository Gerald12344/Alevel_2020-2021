{"ast":null,"code":"// Written By Harvey Randall \\\\\nimport { Vector3 } from \"three\";\nimport { v4 } from \"uuid\";\nvar w = false,\n    a = false,\n    s = false,\n    d = false,\n    up = false,\n    down = false,\n    e = false,\n    q = false,\n    shift = 1;\nexport function controlHandlerInit(document, child2) {\n  /*eslint complexity: [\"error\", 20]*/\n  function onDocumentKeyDown(event, val) {\n    if (child2 === document.activeElement) {\n      return;\n    }\n\n    var keyCode = event.which;\n\n    if (keyCode === 87) {\n      w = val;\n    }\n\n    if (keyCode === 83) {\n      s = val;\n    }\n\n    if (keyCode === 65) {\n      a = val;\n    }\n\n    if (keyCode === 68) {\n      d = val;\n    }\n\n    if (keyCode === 38) {\n      up = val;\n    }\n\n    if (keyCode === 40) {\n      down = val;\n    }\n\n    if (keyCode === 69) {\n      e = val;\n    }\n\n    if (keyCode === 81) {\n      q = val;\n    }\n\n    if (keyCode === 16) {\n      shift = val ? 0.5 : 1;\n    }\n  }\n\n  document.addEventListener(\"keydown\", function (e) {\n    onDocumentKeyDown(e, true);\n  }, false);\n  document.addEventListener(\"keyup\", function (e) {\n    onDocumentKeyDown(e, false);\n  }, false);\n}\n/*eslint complexity: [\"error\", 20]*/\n\nexport function controlHandlerUpdate(Camera) {\n  if (w) {\n    var direction = new Vector3();\n    Camera.getWorldDirection(direction);\n    Camera.position.add(direction.multiplyScalar(shift === 1 ? 1 : 0.25));\n  }\n\n  if (s) {\n    var _direction = new Vector3();\n\n    Camera.getWorldDirection(_direction);\n    Camera.position.add(_direction.multiplyScalar(-(shift === 1 ? 1 : 0.25)));\n  }\n\n  if (a) {\n    Camera.rotateY(0.04 * shift);\n  }\n\n  if (d) {\n    Camera.rotateY(-0.04 * shift);\n  }\n\n  if (up) {\n    Camera.rotateX(0.04 * shift);\n  }\n\n  if (down) {\n    Camera.rotateX(-0.04 * shift);\n  }\n\n  if (q) {\n    Camera.rotateZ(0.02 * shift);\n  }\n\n  if (e) {\n    Camera.rotateZ(-0.02 * shift);\n  }\n}\nvar listeningHooks = {};\nexport function ControlEventListener() {\n  var wKey = false,\n      aKey = false,\n      sKey = false,\n      dKey = false,\n      upKey = false,\n      downKey = false,\n      eKey = false,\n      qKey = false,\n      shiftKey = false;\n\n  function onDocumentKeyDown(event, val) {\n    if (child2 === document.activeElement) {\n      return;\n    }\n\n    var keyCode = event.which;\n\n    if (keyCode === 87) {\n      wKey = val;\n    }\n\n    if (keyCode === 83) {\n      sKey = val;\n    }\n\n    if (keyCode === 65) {\n      aKey = val;\n    }\n\n    if (keyCode === 68) {\n      dKey = val;\n    }\n\n    if (keyCode === 38) {\n      upKey = val;\n    }\n\n    if (keyCode === 40) {\n      downKey = val;\n    }\n\n    if (keyCode === 69) {\n      eKey = val;\n    }\n\n    if (keyCode === 81) {\n      qKey = val;\n    }\n\n    if (keyCode === 16) {\n      shiftKey = val ? 0.5 : 1;\n    }\n\n    listeningHooks.forEach(function (element) {\n      element({\n        wKey: wKey,\n        aKey: aKey,\n        sKey: sKey,\n        dKey: dKey,\n        upKey: upKey,\n        downKey: downKey,\n        eKey: eKey,\n        qKey: qKey,\n        shiftKey: shiftKey\n      });\n    });\n  }\n\n  document.addEventListener(\"keydown\", function (e) {\n    onDocumentKeyDown(e, true);\n  }, false);\n  document.addEventListener(\"keyup\", function (e) {\n    onDocumentKeyDown(e, false);\n  }, false);\n}\n_c = ControlEventListener;\nexport function listenToConrols(arg) {\n  var uuid = v4();\n  listeningHooks[uuid] = arg;\n  console.log(listeningHooks);\n  return uuid;\n}\nexport function CleanUpListener(uuid) {\n  delete listeningHooks[uuid];\n}\n_c2 = CleanUpListener;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ControlEventListener\");\n$RefreshReg$(_c2, \"CleanUpListener\");","map":{"version":3,"sources":["/Users/year12/Desktop/Harvey/alevel_2020-2021/components/gameFundalmentals/controls.js"],"names":["Vector3","v4","w","a","s","d","up","down","e","q","shift","controlHandlerInit","document","child2","onDocumentKeyDown","event","val","activeElement","keyCode","which","addEventListener","controlHandlerUpdate","Camera","direction","getWorldDirection","position","add","multiplyScalar","rotateY","rotateX","rotateZ","listeningHooks","ControlEventListener","wKey","aKey","sKey","dKey","upKey","downKey","eKey","qKey","shiftKey","forEach","element","listenToConrols","arg","uuid","console","log","CleanUpListener"],"mappings":"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","sourcesContent":["// Written By Harvey Randall \\\\\n\nimport { Vector3 } from \"three\";\nimport { v4 } from \"uuid\";\nlet [w, a, s, d, up, down, e, q, shift] = [\n    false,\n    false,\n    false,\n    false,\n    false,\n    false,\n    false,\n    false,\n    1,\n];\n\nexport function controlHandlerInit(document, child2) {\n    /*eslint complexity: [\"error\", 20]*/\n    function onDocumentKeyDown(event, val) {\n        if (child2 === document.activeElement) {\n            return;\n        }\n        var keyCode = event.which;\n        if (keyCode === 87) {\n            w = val;\n        }\n        if (keyCode === 83) {\n            s = val;\n        }\n        if (keyCode === 65) {\n            a = val;\n        }\n        if (keyCode === 68) {\n            d = val;\n        }\n        if (keyCode === 38) {\n            up = val;\n        }\n        if (keyCode === 40) {\n            down = val;\n        }\n        if (keyCode === 69) {\n            e = val;\n        }\n        if (keyCode === 81) {\n            q = val;\n        }\n        if (keyCode === 16) {\n            shift = val ? 0.5 : 1;\n        }\n    }\n\n    document.addEventListener(\n        \"keydown\",\n        (e) => {\n            onDocumentKeyDown(e, true);\n        },\n        false\n    );\n    document.addEventListener(\n        \"keyup\",\n        (e) => {\n            onDocumentKeyDown(e, false);\n        },\n        false\n    );\n}\n\n/*eslint complexity: [\"error\", 20]*/\nexport function controlHandlerUpdate(Camera) {\n    if (w) {\n        let direction = new Vector3();\n        Camera.getWorldDirection(direction);\n        Camera.position.add(direction.multiplyScalar(shift === 1 ? 1 : 0.25));\n    }\n    if (s) {\n        let direction = new Vector3();\n        Camera.getWorldDirection(direction);\n        Camera.position.add(\n            direction.multiplyScalar(-(shift === 1 ? 1 : 0.25))\n        );\n    }\n    if (a) {\n        Camera.rotateY(0.04 * shift);\n    }\n    if (d) {\n        Camera.rotateY(-0.04 * shift);\n    }\n    if (up) {\n        Camera.rotateX(0.04 * shift);\n    }\n    if (down) {\n        Camera.rotateX(-0.04 * shift);\n    }\n    if (q) {\n        Camera.rotateZ(0.02 * shift);\n    }\n    if (e) {\n        Camera.rotateZ(-0.02 * shift);\n    }\n}\n\n\nlet listeningHooks = {};\nexport function ControlEventListener() {\n    let [wKey, aKey, sKey, dKey, upKey, downKey, eKey, qKey, shiftKey] = [\n        false,\n        false,\n        false,\n        false,\n        false,\n        false,\n        false,\n        false,\n        false,\n    ];\n\n    function onDocumentKeyDown(event, val) {\n        if (child2 === document.activeElement) {\n            return;\n        }\n        var keyCode = event.which;\n        if (keyCode === 87) {\n            wKey = val;\n        }\n        if (keyCode === 83) {\n            sKey = val;\n        }\n        if (keyCode === 65) {\n            aKey = val;\n        }\n        if (keyCode === 68) {\n            dKey = val;\n        }\n        if (keyCode === 38) {\n            upKey = val;\n        }\n        if (keyCode === 40) {\n            downKey = val;\n        }\n        if (keyCode === 69) {\n            eKey = val;\n        }\n        if (keyCode === 81) {\n            qKey = val;\n        }\n        if (keyCode === 16) {\n            shiftKey = val ? 0.5 : 1;\n        }\n        listeningHooks.forEach(element => {\n            element({wKey, aKey, sKey, dKey, upKey, downKey, eKey, qKey, shiftKey})\n        });\n    }\n\n    document.addEventListener(\n        \"keydown\",\n        (e) => {\n            onDocumentKeyDown(e, true);\n        },\n        false\n    );\n    document.addEventListener(\n        \"keyup\",\n        (e) => {\n            onDocumentKeyDown(e, false);\n        },\n        false\n    );\n}\n\nexport function listenToConrols(arg) {\n    let uuid = v4();\n    listeningHooks[uuid] = arg;\n    console.log(listeningHooks)\n    return uuid;\n}\nexport function CleanUpListener(uuid) {\n    delete listeningHooks[uuid];\n}\n"]},"metadata":{},"sourceType":"module"}