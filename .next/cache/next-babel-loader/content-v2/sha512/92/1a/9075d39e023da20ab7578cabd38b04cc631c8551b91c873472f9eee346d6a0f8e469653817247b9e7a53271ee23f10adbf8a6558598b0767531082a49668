{"ast":null,"code":"// Written By Harvey Randall \\\\\nimport { BufferAttribute, Mesh, MeshPhongMaterial, PlaneBufferGeometry, Vector2, Vector3 } from \"three\";\nimport { Perlin, FBM } from \"../Core-API/PerlinNoise/PerlingNoise\";\n\nvar SimplexNoise = require(\"simplex-noise\");\n\nlet currentTerrain;\nexport function ReturnTerrainPointer() {\n  return currentTerrain;\n}\n/*eslint complexity: [\"error\", 20]*/\n\nexport function generateTerrain(seed, SceneToGet) {\n  //------------[MAIN FUNCTION VARIABLES]------------\\\\\n  const simplex = new SimplexNoise(seed);\n  let geometry = new PlaneBufferGeometry(500, 500, 100, 100);\n  let colours = [];\n  const positionAttribute = geometry.getAttribute(\"position\"); //------------[Edit the Geomtry Accordingly]------------\\\\\n\n  for (var i = 0, l = geometry.attributes.position.count; i < l; i++) {\n    // Get Data position\n    const vertex = new Vector3();\n    vertex.fromBufferAttribute(positionAttribute, i); // Check Height from Perlin Noise Generator\n\n    let height = simplex.noise2D(vertex.x / 128, vertex.y / 128) * 30; // Set the height accordingly\n\n    geometry.attributes.position.array[i * 3 + 2] = height; // Update Vertice colours accordinly\n\n    if (height > 23) {\n      colours.push(1, 1, 1);\n    } else if (height > 5) {\n      colours.push(0.56, 0.54, 0.48);\n    } else if (height < -20) {\n      colours.push(0.501, 0.772, 0.87);\n    } else {\n      colours.push(0.56, 0.68, 0.166);\n    }\n  } //------------[Create Material]------------\\\\\n\n\n  var material = new MeshPhongMaterial({\n    vertexColors: colours,\n    reflectivity: 0,\n    roughness: 1,\n    flatShading: true\n  }); //------------[Create Mesh]------------\\\\\n\n  var plane2 = new Mesh(geometry, material);\n  plane2.receiveShadow = true;\n  plane2.castShadow = true;\n  plane2.position.y = -3;\n  plane2.rotateX(Math.PI / 2 + Math.PI); //------------[Edit colour attribute]------------\\\\\n\n  geometry.setAttribute(\"color\", new BufferAttribute(new Float32Array(colours), 3)); //geometry.computeVertexNormals();\n  //------------[Add to Base Scene]------------\\\\\n\n  currentTerrain = plane2;\n  plane2.name = \"MAIN_TERRAIN\";\n  SceneToGet.add(plane2);\n}\nexport function generateTerrainChunk(seed, Position, gain) {\n  //------------[MAIN FUNCTION VARIABLES]------------\\\\\n  const simplex = new SimplexNoise(seed);\n  let geometry = new PlaneBufferGeometry(500, 500, 100, 100);\n  let colours = [];\n  const fbm = new FBM({\n    seed,\n    scale: 0.06,\n    octaves: 6,\n    persistance: 0.5,\n    lacunarity: 2,\n    redistribution: 1,\n    height: 0\n  });\n  console.log(Position);\n  const positionAttribute = geometry.getAttribute(\"position\"); //------------[Edit the Geomtry Accordingly]------------\\\\\n\n  for (var i = 0, l = geometry.attributes.position.count; i < l; i++) {\n    // Get Data position\n    const vertex = new Vector3();\n    vertex.fromBufferAttribute(positionAttribute, i); // Check Height from Perlin Noise Generator\n\n    /*let height =\n        simplex.noise2D(\n            (vertex.x + Position.x) / 128,\n            (vertex.y + Position.y) / 128\n        ) * gain;*/\n    // Set the height accordingly\n\n    let height = fbm.get2(new Vector2(vertex.x + Position.x, vertex.y + Position.x));\n    geometry.attributes.position.array[i * 3 + 2] = height; // Update Vertice colours accordinly\n\n    if (height > 23) {\n      colours.push(1, 1, 1);\n    } else if (height > 5) {\n      colours.push(0.56, 0.54, 0.48);\n    } else if (height < -20) {\n      colours.push(0.501, 0.772, 0.87);\n    } else {\n      colours.push(0.56, 0.68, 0.166);\n    }\n  } //------------[Create Material]------------\\\\\n\n\n  var material = new MeshPhongMaterial({\n    vertexColors: colours,\n    reflectivity: 0,\n    roughness: 1,\n    flatShading: true\n  }); //------------[Create Mesh]------------\\\\\n\n  var plane2 = new Mesh(geometry, material);\n  plane2.receiveShadow = true;\n  plane2.castShadow = true;\n  plane2.position.set(Position.x, -3, Position.y);\n  plane2.rotateX(Math.PI / 2 + Math.PI); //------------[Edit colour attribute]------------\\\\\n\n  geometry.setAttribute(\"color\", new BufferAttribute(new Float32Array(colours), 3)); //------------[Add to Base Scene]------------\\\\\n\n  currentTerrain = plane2;\n  plane2.name = `Terrain_Chunk_${Position.x}:${Position.y}`;\n  return plane2;\n}","map":{"version":3,"sources":["/Users/year12/Desktop/Harvey/alevel_2020-2021/components/gameFundalmentals/ProceduleTerrain.js"],"names":["BufferAttribute","Mesh","MeshPhongMaterial","PlaneBufferGeometry","Vector2","Vector3","Perlin","FBM","SimplexNoise","require","currentTerrain","ReturnTerrainPointer","generateTerrain","seed","SceneToGet","simplex","geometry","colours","positionAttribute","getAttribute","i","l","attributes","position","count","vertex","fromBufferAttribute","height","noise2D","x","y","array","push","material","vertexColors","reflectivity","roughness","flatShading","plane2","receiveShadow","castShadow","rotateX","Math","PI","setAttribute","Float32Array","name","add","generateTerrainChunk","Position","gain","fbm","scale","octaves","persistance","lacunarity","redistribution","console","log","get2","set"],"mappings":"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","sourcesContent":["// Written By Harvey Randall \\\\\n\nimport {\n    BufferAttribute,\n    Mesh,\n    MeshPhongMaterial,\n    PlaneBufferGeometry,\n    Vector2,\n    Vector3,\n} from \"three\";\n\nimport { Perlin, FBM } from \"../Core-API/PerlinNoise/PerlingNoise\";\nvar SimplexNoise = require(\"simplex-noise\");\n\nlet currentTerrain;\n\nexport function ReturnTerrainPointer() {\n    return currentTerrain;\n}\n\n/*eslint complexity: [\"error\", 20]*/\nexport function generateTerrain(seed, SceneToGet) {\n    //------------[MAIN FUNCTION VARIABLES]------------\\\\\n    const simplex = new SimplexNoise(seed);\n    let geometry = new PlaneBufferGeometry(500, 500, 100, 100);\n    let colours = [];\n\n    const positionAttribute = geometry.getAttribute(\"position\");\n\n    //------------[Edit the Geomtry Accordingly]------------\\\\\n    for (var i = 0, l = geometry.attributes.position.count; i < l; i++) {\n        // Get Data position\n        const vertex = new Vector3();\n        vertex.fromBufferAttribute(positionAttribute, i);\n\n        // Check Height from Perlin Noise Generator\n        let height = simplex.noise2D(vertex.x / 128, vertex.y / 128) * 30;\n        // Set the height accordingly\n        geometry.attributes.position.array[i * 3 + 2] = height;\n\n        // Update Vertice colours accordinly\n        if (height > 23) {\n            colours.push(1, 1, 1);\n        } else if (height > 5) {\n            colours.push(0.56, 0.54, 0.48);\n        } else if (height < -20) {\n            colours.push(0.501, 0.772, 0.87);\n        } else {\n            colours.push(0.56, 0.68, 0.166);\n        }\n    }\n\n    //------------[Create Material]------------\\\\\n    var material = new MeshPhongMaterial({\n        vertexColors: colours,\n        reflectivity: 0,\n        roughness: 1,\n        flatShading: true,\n    });\n\n    //------------[Create Mesh]------------\\\\\n    var plane2 = new Mesh(geometry, material);\n    plane2.receiveShadow = true;\n    plane2.castShadow = true;\n    plane2.position.y = -3;\n    plane2.rotateX(Math.PI / 2 + Math.PI);\n\n    //------------[Edit colour attribute]------------\\\\\n    geometry.setAttribute(\n        \"color\",\n        new BufferAttribute(new Float32Array(colours), 3)\n    );\n    //geometry.computeVertexNormals();\n\n    //------------[Add to Base Scene]------------\\\\\n    currentTerrain = plane2;\n    plane2.name = \"MAIN_TERRAIN\";\n    SceneToGet.add(plane2);\n}\n\nexport function generateTerrainChunk(seed, Position, gain) {\n    //------------[MAIN FUNCTION VARIABLES]------------\\\\\n    const simplex = new SimplexNoise(seed);\n    let geometry = new PlaneBufferGeometry(500, 500, 100, 100);\n    let colours = [];\n    const fbm = new FBM({\n        seed,\n        scale: 0.06,\n        octaves: 6,\n        persistance: 0.5,\n        lacunarity: 2,\n        redistribution: 1,\n        height: 0,\n      });\n\n    console.log(Position);\n\n    const positionAttribute = geometry.getAttribute(\"position\");\n\n    //------------[Edit the Geomtry Accordingly]------------\\\\\n    for (var i = 0, l = geometry.attributes.position.count; i < l; i++) {\n        // Get Data position\n        const vertex = new Vector3();\n        vertex.fromBufferAttribute(positionAttribute, i);\n\n        // Check Height from Perlin Noise Generator\n        /*let height =\n            simplex.noise2D(\n                (vertex.x + Position.x) / 128,\n                (vertex.y + Position.y) / 128\n            ) * gain;*/\n        // Set the height accordingly\n        let height = fbm.get2(new Vector2(vertex.x+Position.x, vertex.y+Position.x))\n\n        geometry.attributes.position.array[i * 3 + 2] = height;\n\n        // Update Vertice colours accordinly\n        if (height > 23) {\n            colours.push(1, 1, 1);\n        } else if (height > 5) {\n            colours.push(0.56, 0.54, 0.48);\n        } else if (height < -20) {\n            colours.push(0.501, 0.772, 0.87);\n        } else {\n            colours.push(0.56, 0.68, 0.166);\n        }\n    }\n\n    //------------[Create Material]------------\\\\\n    var material = new MeshPhongMaterial({\n        vertexColors: colours,\n        reflectivity: 0,\n        roughness: 1,\n        flatShading: true,\n    });\n\n    //------------[Create Mesh]------------\\\\\n    var plane2 = new Mesh(geometry, material);\n    plane2.receiveShadow = true;\n    plane2.castShadow = true;\n    plane2.position.set(Position.x, -3, Position.y);\n    plane2.rotateX(Math.PI / 2 + Math.PI);\n\n    //------------[Edit colour attribute]------------\\\\\n    geometry.setAttribute(\n        \"color\",\n        new BufferAttribute(new Float32Array(colours), 3)\n    );\n\n    //------------[Add to Base Scene]------------\\\\\n    currentTerrain = plane2;\n    plane2.name = `Terrain_Chunk_${Position.x}:${Position.y}`;\n    return plane2;\n}\n"]},"metadata":{},"sourceType":"module"}