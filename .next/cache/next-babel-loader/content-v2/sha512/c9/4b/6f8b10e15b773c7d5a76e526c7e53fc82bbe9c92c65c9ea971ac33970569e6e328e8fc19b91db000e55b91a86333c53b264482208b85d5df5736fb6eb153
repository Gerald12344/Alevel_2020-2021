{"ast":null,"code":"import _regeneratorRuntime from \"/Users/year12/Desktop/Harvey/alevel_2020-2021/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/year12/Desktop/Harvey/alevel_2020-2021/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/year12/Desktop/Harvey/alevel_2020-2021/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/year12/Desktop/Harvey/alevel_2020-2021/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { Group, MeshPhongMaterial, Vector3 } from \"three\";\nimport { radiants } from \"../../Algorithms/degToRad\";\nimport { wait } from \"../../Algorithms/MathUtils\";\nimport { addGLBFile } from \"../../Core-API/3dModelHandlers/GLBLoader\";\nimport { attachToMainEventStream } from \"../../Core-API/ConnectAPI\";\nimport { debugCube } from \"../../Core-API/gemotryManager\";\nimport { createPointLight } from \"../../Core-API/LightingManager\";\nimport { addToRenderSequence } from \"../../Core-API/RenderingHandler\";\nimport { listenToConrols } from \"../controls\";\nimport { addtoDayTimeChecker, getDayState, removeFromDayTimeHook } from \"../DayNightCycle\";\nexport var MakePlane = /*#__PURE__*/function () {\n  function MakePlane(SceneToGet, settings) {\n    _classCallCheck(this, MakePlane);\n\n    this.SceneToGet = SceneToGet;\n    this.settings = settings;\n    this.group = new Group();\n    this.speed = 0;\n    this.elevatorPitch = 0;\n    this.airelonePitch = 0;\n    this.rudderPitch = 0;\n    this.checker = -1;\n  }\n\n  _createClass(MakePlane, [{\n    key: \"loadFiles\",\n    value: function () {\n      var _loadFiles = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return addGLBFile(\"/Aircraft/BasicPlane/Plane.glb\", this.SceneToGet);\n\n              case 2:\n                this.plane = _context.sent;\n                _context.next = 5;\n                return addGLBFile(\"/Aircraft/BasicPlane/Blades.glb\", this.SceneToGet);\n\n              case 5:\n                this.props = _context.sent;\n                _context.next = 8;\n                return addGLBFile(\"/Aircraft/BasicPlane/leftAirelone.glb\", this.SceneToGet);\n\n              case 8:\n                this.leftAirelone = _context.sent;\n                _context.next = 11;\n                return addGLBFile(\"/Aircraft/BasicPlane/rightAirelone.glb\", this.SceneToGet);\n\n              case 11:\n                this.rightAirelone = _context.sent;\n                _context.next = 14;\n                return addGLBFile(\"/Aircraft/BasicPlane/LeftWingControlsSurface.glb\", this.SceneToGet);\n\n              case 14:\n                this.leftControlSurface = _context.sent;\n                _context.next = 17;\n                return addGLBFile(\"/Aircraft/BasicPlane/RightWingControlsSurface.glb\", this.SceneToGet);\n\n              case 17:\n                this.rightControlSurface = _context.sent;\n                _context.next = 20;\n                return addGLBFile(\"/Aircraft/BasicPlane/Rudder.glb\", this.SceneToGet);\n\n              case 20:\n                this.rudder = _context.sent;\n\n              case 21:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function loadFiles() {\n        return _loadFiles.apply(this, arguments);\n      }\n\n      return loadFiles;\n    }()\n  }, {\n    key: \"CreateGroupAndPos\",\n    value: function CreateGroupAndPos() {\n      var _this = this;\n\n      this.group.add(this.plane.scene);\n      this.group.add(this.props.scene);\n      this.group.add(this.leftAirelone.scene);\n      this.group.add(this.rightAirelone.scene);\n      this.group.add(this.rightControlSurface.scene);\n      this.group.add(this.leftControlSurface.scene);\n      this.group.add(this.rudder.scene);\n      this.leftAirelone.scene.position.set(12.936, 15.994, -59.264);\n      this.rightAirelone.scene.position.set(-12.495, 15.888, -59.294);\n      this.leftControlSurface.scene.position.set(46.243, 22.536, -13.541);\n      this.leftControlSurface.scene.rotateY(radiants(-7));\n      this.rightControlSurface.scene.position.set(-46.2718, 22.5411, -13.5447);\n      this.rightControlSurface.scene.rotateY(radiants(6.8));\n      this.rightControlSurface.scene.rotateZ(radiants(-3.5)); //this.rightControlSurface.scene.rotateX(radiants(183.57))\n\n      this.rudder.scene.position.set(-0.022, 24.67, -68.17);\n      this.rudder.scene.rotateX(radiants(-22));\n      this.props.scene.position.set(0, 15, 22);\n      this.SceneToGet.add(this.group);\n      this.group.scale.set(0.05, 0.05, 0.05);\n      var _ref = [this.props.scene, this.leftAirelone.scene],\n          props = _ref[0],\n          leftAirelone = _ref[1]; // For testing \\\\\n\n      var light = createPointLight(0xff0000, 3, [60, 22.5, -10], 2.5);\n      var light2 = createPointLight(0x00ff00, 3, [-60, 22.5, -10], 2.5);\n      var whiteLight = createPointLight(0xffffff, 3, [0, 30, -60], 2.5);\n      var day = true;\n      setInterval(function () {\n        console.log(getDayState());\n\n        if (getDayState() === false && day === true) {\n          day = false;\n          console.log('here');\n\n          _this.group.add(light);\n        } else if (getDayState() === true && day === false) {\n          day = true;\n\n          _this.group.remove(light);\n        }\n      }, 1000);\n      var currentEvelatorPitch = 0;\n      var airelonePitch = 0;\n      var rudderPitch = 0;\n      addToRenderSequence(\"Main\", function () {\n        var direction = new Vector3();\n\n        _this.group.getWorldDirection(direction);\n\n        _this.group.position.add(direction.multiplyScalar(_this.speed)); //this.group.position.z += this.speed;\n\n\n        props.rotateZ(_this.speed);\n\n        if (currentEvelatorPitch < _this.elevatorPitch) {\n          _this.leftAirelone.scene.rotateX(-0.01);\n\n          _this.rightAirelone.scene.rotateX(-0.01);\n\n          currentEvelatorPitch += 0.01; //if(this.speed < 0.4)return\n\n          _this.group.rotateX(currentEvelatorPitch / 50 * _this.speed);\n        } else if (currentEvelatorPitch > _this.elevatorPitch) {\n          _this.leftAirelone.scene.rotateX(0.01);\n\n          _this.rightAirelone.scene.rotateX(0.01);\n\n          currentEvelatorPitch -= 0.01; //if(this.speed < 0.4)return\n\n          _this.group.rotateX(currentEvelatorPitch / 50 * _this.speed);\n        }\n\n        if (airelonePitch < _this.airelonePitch) {\n          _this.leftControlSurface.scene.rotateX(0.01);\n\n          _this.rightControlSurface.scene.rotateX(-0.01);\n\n          airelonePitch += 0.01; //if(this.speed < 0.4)return\n\n          _this.group.rotateZ(-airelonePitch / 50 * _this.speed);\n        } else if (airelonePitch > _this.airelonePitch) {\n          _this.leftControlSurface.scene.rotateX(-0.01);\n\n          _this.rightControlSurface.scene.rotateX(0.01);\n\n          airelonePitch -= 0.01; //if(this.speed < 0.4)return\n\n          _this.group.rotateZ(-airelonePitch / 50 * _this.speed);\n        }\n\n        if (rudderPitch < _this.rudderPitch) {\n          _this.rudder.scene.rotateY(-0.01);\n\n          rudderPitch += 0.01; //if(this.speed < 0.4)return\n\n          _this.group.rotateY(rudderPitch / 50 * _this.speed);\n        } else if (rudderPitch > _this.rudderPitch) {\n          _this.rudder.scene.rotateY(0.01);\n\n          rudderPitch -= 0.01; //if(this.speed < 0.4)return\n\n          _this.group.rotateY(rudderPitch / 50 * _this.speed);\n        }\n      }, false);\n      return this.group;\n    }\n  }, {\n    key: \"attachCameraAndControl\",\n    value: function attachCameraAndControl(Camera) {\n      var _this2 = this;\n\n      this.UUID = listenToConrols(function (_ref2) {\n        var wKey = _ref2.wKey,\n            aKey = _ref2.aKey,\n            sKey = _ref2.sKey,\n            dKey = _ref2.dKey,\n            upKey = _ref2.upKey,\n            downKey = _ref2.downKey,\n            eKey = _ref2.eKey,\n            qKey = _ref2.qKey,\n            shiftKey = _ref2.shiftKey,\n            zKey = _ref2.zKey,\n            xKey = _ref2.xKey;\n\n        if (zKey) {\n          if (_this2.speed < 3) {\n            _this2.speed += 0.01;\n          }\n        }\n\n        if (xKey) {\n          if (_this2.speed > 0) {\n            _this2.speed -= 0.01;\n          }\n        }\n\n        if (wKey) {\n          _this2.elevatorPitch = 0.5;\n        } else if (sKey) {\n          _this2.elevatorPitch = -0.5;\n        } else {\n          _this2.elevatorPitch = 0;\n        }\n\n        if (qKey) {\n          _this2.rudderPitch = 0.3;\n        } else if (eKey) {\n          _this2.rudderPitch = -0.3;\n        } else {\n          _this2.rudderPitch = 0;\n        }\n\n        if (aKey) {\n          _this2.airelonePitch = 0.5;\n        } else if (dKey) {\n          _this2.airelonePitch = -0.5;\n        } else {\n          _this2.airelonePitch = 0;\n        }\n      });\n      this.group.add(Camera);\n      Camera.position.set(0, 40, -100);\n      Camera.rotateY(radiants(180));\n      Camera.rotateX(radiants(-20));\n    }\n  }, {\n    key: \"cleanUp\",\n    value: function cleanUp() {\n      if (this.UUID !== undefined) {\n        CleanUpListener(this.UUID);\n      }\n\n      this.group.remove();\n\n      if (this.checker !== -1) {\n        removeFromDayTimeHook(this.checker);\n      }\n\n      return {\n        success: true\n      };\n    }\n  }]);\n\n  return MakePlane;\n}();","map":{"version":3,"sources":["/Users/year12/Desktop/Harvey/alevel_2020-2021/components/gameFundalmentals/planeHandler/MainPlane.js"],"names":["Group","MeshPhongMaterial","Vector3","radiants","wait","addGLBFile","attachToMainEventStream","debugCube","createPointLight","addToRenderSequence","listenToConrols","addtoDayTimeChecker","getDayState","removeFromDayTimeHook","MakePlane","SceneToGet","settings","group","speed","elevatorPitch","airelonePitch","rudderPitch","checker","plane","props","leftAirelone","rightAirelone","leftControlSurface","rightControlSurface","rudder","add","scene","position","set","rotateY","rotateZ","rotateX","scale","light","light2","whiteLight","day","setInterval","console","log","remove","currentEvelatorPitch","direction","getWorldDirection","multiplyScalar","Camera","UUID","wKey","aKey","sKey","dKey","upKey","downKey","eKey","qKey","shiftKey","zKey","xKey","undefined","CleanUpListener","success"],"mappings":"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","sourcesContent":["import { Group, MeshPhongMaterial, Vector3 } from \"three\";\nimport { radiants } from \"../../Algorithms/degToRad\";\nimport { wait } from \"../../Algorithms/MathUtils\";\nimport { addGLBFile } from \"../../Core-API/3dModelHandlers/GLBLoader\";\nimport { attachToMainEventStream } from \"../../Core-API/ConnectAPI\";\nimport { debugCube } from \"../../Core-API/gemotryManager\";\nimport { createPointLight } from \"../../Core-API/LightingManager\";\nimport { addToRenderSequence } from \"../../Core-API/RenderingHandler\";\nimport { listenToConrols } from \"../controls\";\nimport { addtoDayTimeChecker, getDayState, removeFromDayTimeHook } from \"../DayNightCycle\";\n\nexport class MakePlane {\n    constructor(SceneToGet, settings) {\n        this.SceneToGet = SceneToGet;\n        this.settings = settings;\n        this.group = new Group();\n        this.speed = 0;\n        this.elevatorPitch = 0;\n        this.airelonePitch = 0;\n        this.rudderPitch = 0;\n        this.checker = -1;\n    }\n\n    async loadFiles() {\n        this.plane = await addGLBFile(\n            \"/Aircraft/BasicPlane/Plane.glb\",\n            this.SceneToGet\n        );\n        this.props = await addGLBFile(\n            \"/Aircraft/BasicPlane/Blades.glb\",\n            this.SceneToGet\n        );\n        this.leftAirelone = await addGLBFile(\n            \"/Aircraft/BasicPlane/leftAirelone.glb\",\n            this.SceneToGet\n        );\n        this.rightAirelone = await addGLBFile(\n            \"/Aircraft/BasicPlane/rightAirelone.glb\",\n            this.SceneToGet\n        );\n        this.leftControlSurface = await addGLBFile(\n            \"/Aircraft/BasicPlane/LeftWingControlsSurface.glb\",\n            this.SceneToGet\n        );\n        this.rightControlSurface = await addGLBFile(\n            \"/Aircraft/BasicPlane/RightWingControlsSurface.glb\",\n            this.SceneToGet\n        );\n        this.rudder = await addGLBFile(\n            \"/Aircraft/BasicPlane/Rudder.glb\",\n            this.SceneToGet\n        );\n    }\n\n    CreateGroupAndPos() {\n        this.group.add(this.plane.scene);\n        this.group.add(this.props.scene);\n        this.group.add(this.leftAirelone.scene);\n        this.group.add(this.rightAirelone.scene);\n        this.group.add(this.rightControlSurface.scene);\n        this.group.add(this.leftControlSurface.scene);\n        this.group.add(this.rudder.scene);\n\n        this.leftAirelone.scene.position.set(12.936, 15.994, -59.264);\n        this.rightAirelone.scene.position.set(-12.495, 15.888, -59.294);\n\n        this.leftControlSurface.scene.position.set(46.243, 22.536, -13.541);\n        this.leftControlSurface.scene.rotateY(radiants(-7));\n\n        this.rightControlSurface.scene.position.set(\n            -46.2718,\n            22.5411,\n            -13.5447\n        );\n        this.rightControlSurface.scene.rotateY(radiants(6.8));\n        this.rightControlSurface.scene.rotateZ(radiants(-3.5));\n        //this.rightControlSurface.scene.rotateX(radiants(183.57))\n\n        this.rudder.scene.position.set(-0.022, 24.67, -68.17);\n        this.rudder.scene.rotateX(radiants(-22));\n\n        this.props.scene.position.set(0, 15, 22);\n        this.SceneToGet.add(this.group);\n\n        this.group.scale.set(0.05, 0.05, 0.05);\n\n        let [props, leftAirelone] = [this.props.scene, this.leftAirelone.scene];\n        // For testing \\\\\n\n        let light = createPointLight(0xff0000, 3, [60, 22.5, -10], 2.5);\n        let light2 = createPointLight(0x00ff00, 3, [-60, 22.5, -10], 2.5);\n        let whiteLight = createPointLight(0xffffff, 3, [0, 30, -60], 2.5);\n        let day = true\n\n        setInterval(() => {\n            console.log(getDayState())\n            if(getDayState() === false && day === true){\n                day = false\n                console.log('here')\n                this.group.add(light);\n            }else if(getDayState() === true && day === false){\n                day = true\n                this.group.remove(light);\n            }\n        }, 1000)\n\n        let currentEvelatorPitch = 0;\n        let airelonePitch = 0;\n        let rudderPitch = 0;\n        addToRenderSequence(\n            \"Main\",\n            () => {\n                let direction = new Vector3();\n                this.group.getWorldDirection(direction);\n                this.group.position.add(direction.multiplyScalar(this.speed));\n                //this.group.position.z += this.speed;\n\n                props.rotateZ(this.speed);\n                if (currentEvelatorPitch < this.elevatorPitch) {\n                    this.leftAirelone.scene.rotateX(-0.01);\n                    this.rightAirelone.scene.rotateX(-0.01);\n                    currentEvelatorPitch += 0.01;\n                    //if(this.speed < 0.4)return\n                    this.group.rotateX(\n                        (currentEvelatorPitch / 50) * this.speed\n                    );\n                } else if (currentEvelatorPitch > this.elevatorPitch) {\n                    this.leftAirelone.scene.rotateX(0.01);\n                    this.rightAirelone.scene.rotateX(0.01);\n                    currentEvelatorPitch -= 0.01;\n                    //if(this.speed < 0.4)return\n                    this.group.rotateX(\n                        (currentEvelatorPitch / 50) * this.speed\n                    );\n                }\n\n                if (airelonePitch < this.airelonePitch) {\n                    this.leftControlSurface.scene.rotateX(0.01);\n                    this.rightControlSurface.scene.rotateX(-0.01);\n                    airelonePitch += 0.01;\n                    //if(this.speed < 0.4)return\n                    this.group.rotateZ((-airelonePitch / 50) * this.speed);\n                } else if (airelonePitch > this.airelonePitch) {\n                    this.leftControlSurface.scene.rotateX(-0.01);\n                    this.rightControlSurface.scene.rotateX(0.01);\n                    airelonePitch -= 0.01;\n                    //if(this.speed < 0.4)return\n                    this.group.rotateZ((-airelonePitch / 50) * this.speed);\n                }\n\n                if (rudderPitch < this.rudderPitch) {\n                    this.rudder.scene.rotateY(-0.01);\n                    rudderPitch += 0.01;\n                    //if(this.speed < 0.4)return\n                    this.group.rotateY((rudderPitch / 50) * this.speed);\n                } else if (rudderPitch > this.rudderPitch) {\n                    this.rudder.scene.rotateY(0.01);\n                    rudderPitch -= 0.01;\n                    //if(this.speed < 0.4)return\n                    this.group.rotateY((rudderPitch / 50) * this.speed);\n                }\n            },\n            false\n        );\n\n        return this.group;\n    }\n    attachCameraAndControl(Camera) {\n        this.UUID = listenToConrols(\n            ({\n                wKey,\n                aKey,\n                sKey,\n                dKey,\n                upKey,\n                downKey,\n                eKey,\n                qKey,\n                shiftKey,\n                zKey,\n                xKey,\n            }) => {\n                if (zKey) {\n                    if (this.speed < 3) {\n                        this.speed += 0.01;\n                    }\n                }\n                if (xKey) {\n                    if (this.speed > 0) {\n                        this.speed -= 0.01;\n                    }\n                }\n                if (wKey) {\n                    this.elevatorPitch = 0.5;\n                } else if (sKey) {\n                    this.elevatorPitch = -0.5;\n                } else {\n                    this.elevatorPitch = 0;\n                }\n                if (qKey) {\n                    this.rudderPitch = 0.3;\n                } else if (eKey) {\n                    this.rudderPitch = -0.3;\n                } else {\n                    this.rudderPitch = 0;\n                }\n\n                if (aKey) {\n                    this.airelonePitch = 0.5;\n                } else if (dKey) {\n                    this.airelonePitch = -0.5;\n                } else {\n                    this.airelonePitch = 0;\n                }\n            }\n        );\n        this.group.add(Camera);\n        Camera.position.set(0, 40, -100);\n        Camera.rotateY(radiants(180));\n        Camera.rotateX(radiants(-20));\n    }\n\n    cleanUp() {\n        if (this.UUID !== undefined) {\n            CleanUpListener(this.UUID);\n        }\n        this.group.remove();\n        if (this.checker !== -1) {\n            removeFromDayTimeHook(this.checker);\n        }\n        return { success: true };\n    }\n}\n"]},"metadata":{},"sourceType":"module"}