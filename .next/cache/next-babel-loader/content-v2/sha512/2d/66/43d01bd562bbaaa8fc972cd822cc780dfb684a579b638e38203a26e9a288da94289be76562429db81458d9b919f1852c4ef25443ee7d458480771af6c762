{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/year12/Desktop/Harvey/alevel_2020-2021/pages/test.js\";\n// Written By Harvey Randall \\\\\nimport { useEffect, useState, useContext } from \"react\";\nimport * as THREE from 'three';\nimport CameraControls from 'camera-controls';\nimport { BoxGeometry, Clock, DoubleSide, Material, Mesh, MeshBasicMaterial, MeshStandardMaterial, PerspectiveCamera, PointLight, Scene, Vector3, WebGLRenderer, MeshLambertMaterial } from \"three\";\n\nvar perlin = require('perlin-noise');\n\nvar SimplexNoise = require('simplex-noise');\n\nimport { GenerateClouds } from '../components/clouds';\nimport { getRandomStarField } from '../components/stars';\nimport { CreateDayNightCycle } from \"../components/gameFundalmentals/DayNightCycle\";\n\nvar Stats = require('stats.js');\n\nimport { useAppContext } from '../components/contextHandler';\nimport { GenerateLabel } from '../components/nametag';\nimport { GenerateTerrain } from \"../components/gameFundalmentals/ProceduleTerrain\";\nCameraControls.install({\n  THREE: THREE\n});\nexport default function render() {\n  var _ref;\n\n  const {\n    0: child,\n    1: setChild\n  } = useState(undefined);\n  const {\n    0: gameEventData,\n    1: setGameEventData\n  } = useState([]);\n  const {\n    0: newTheta,\n    1: setTheat\n  } = useState(0);\n  const {\n    0: day,\n    1: setDay\n  } = useState(\"not day\");\n  const {\n    0: child2,\n    1: setChild2\n  } = useState(undefined);\n  const {\n    0: pos,\n    1: setPos\n  } = useState(undefined);\n  const {\n    0: rot,\n    1: setRot\n  } = useState(undefined);\n  const socket = useAppContext();\n  const {\n    0: recievedSeed,\n    1: setSeed\n  } = useState(undefined);\n  const {\n    0: rendered,\n    1: setRendered\n  } = useState(false);\n  const {\n    0: clients,\n    1: setClients\n  } = useState([]);\n  const {\n    0: personData,\n    1: setPersonalData\n  } = useState(undefined);\n  const {\n    0: latestPerson,\n    1: setLatestestPerson\n  } = useState([]);\n  socket.once(\"welcome\", (seed, client, data) => {\n    setSeed(seed);\n    console.log(client);\n    setClients(client);\n    setPersonalData(data);\n  });\n  useEffect(() => {\n    if (child === undefined || recievedSeed === undefined || rendered === true) return;\n    setRendered(true);\n    let stats = new Stats();\n    stats.showPanel(1); // 0: fps, 1: ms, 2: mb, 3+: custom\n\n    document.body.appendChild(stats.dom);\n    let SceneToGet = new Scene();\n    let Renders = new WebGLRenderer({\n      antialias: true,\n      alpha: true\n    });\n    Renders.setClearColor(0x87ceeb, 1);\n    Renders.setSize(window.innerWidth, window.innerHeight);\n    child.appendChild(Renders.domElement);\n    GenerateTerrain(recievedSeed, SceneToGet);\n    const planeGeometry = new THREE.PlaneGeometry(20, 20, 32, 32);\n    planeGeometry.rotateX(Math.PI / 2);\n    const planeMaterial = new THREE.MeshStandardMaterial({\n      color: 0x567d46,\n      side: DoubleSide\n    });\n    const plane = new THREE.Mesh(planeGeometry, planeMaterial);\n    plane.position.y = -0.5;\n    SceneToGet.add(plane);\n    let daynight = new CreateDayNightCycle(SceneToGet, Renders);\n    let clouds = [];\n\n    for (let i = 0; i < 40; i++) {\n      clouds.push(new GenerateClouds(new Vector3(Math.random() * 300 - 300, 80 + Math.random() * 20, Math.random() * 600 - 400), SceneToGet, Math.random() * 0.2, Math.random() * 6 + 1));\n    }\n\n    var Camera = new PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n    /*const cameraControls = new CameraControls(Camera, Renders.domElement);\n    cameraControls.azimuthRotateSpeed = -0.3; // negative value to invert rotation direction\n    cameraControls.polarRotateSpeed = -0.3; // negative value to invert rotation direction\n    cameraControls.truckSpeed = 1 / 1e-5 * 3;\n    cameraControls.distance = 5\n    //cameraControls.touches.two = CameraControls.ACTION.TOUCH_ZOOM_TRUCK;\n    cameraControls.saveState();*/\n    //Camera.position.z = 5;\n\n    let [w, a, s, d, up, down, e, q, shift] = [false, false, false, false, false, false, false, false, 1];\n    document.addEventListener(\"keydown\", e => {\n      onDocumentKeyDown(e, true);\n    }, false);\n    document.addEventListener(\"keyup\", e => {\n      onDocumentKeyDown(e, false);\n    }, false);\n\n    function onDocumentKeyDown(event, val) {\n      if (child2 === document.activeElement) return;\n      var keyCode = event.which;\n\n      if (keyCode == 87) {\n        w = val;\n      }\n\n      if (keyCode == 83) {\n        s = val;\n      }\n\n      if (keyCode == 65) {\n        a = val;\n      }\n\n      if (keyCode == 68) {\n        d = val;\n      }\n\n      if (keyCode == 38) {\n        up = val;\n      }\n\n      if (keyCode == 40) {\n        down = val;\n      }\n\n      if (keyCode == 69) {\n        e = val;\n      }\n\n      if (keyCode == 81) {\n        q = val;\n      }\n\n      if (keyCode == 16) {\n        shift = val ? 0.5 : 1;\n      }\n    }\n\n    ;\n    Renders.domElement.requestPointerLock();\n    const gridHelper = new THREE.GridHelper(50, 50);\n    gridHelper.position.y = -1;\n    SceneToGet.add(gridHelper);\n    let players = [];\n\n    function MakeCube(color = \"rgb(0,0,0)\", name = \"unkown\") {\n      const group = new THREE.Group();\n      const geometry = new THREE.BoxGeometry(1, 1, 1);\n      const material = new THREE.MeshLambertMaterial({\n        color: new THREE.Color(color),\n        emissive: new THREE.Color(color)\n      });\n      const cube = new THREE.Mesh(geometry, material);\n      group.add(cube);\n      const cyclinder = new THREE.CylinderGeometry(0.3, 0.3, 0.6, 30);\n      const material2 = new THREE.MeshLambertMaterial({\n        color: 0x000000\n      });\n      const cylinderBuild = new THREE.Mesh(cyclinder, material2);\n      cylinderBuild.rotateX(Math.PI / 2 + Math.PI);\n      cylinderBuild.position.set(0, 0, -0.6);\n      group.add(cylinderBuild);\n      GenerateLabel(name, group);\n      SceneToGet.add(group);\n      group.name = name;\n      return group;\n    }\n\n    console.log(clients);\n    let prevData = [];\n\n    let addtoGameFeed = (name = \"Unkown\", event) => {\n      let NewGameEventArray = [...prevData];\n      console.log(NewGameEventArray);\n      NewGameEventArray.unshift({\n        name: name,\n        event: event\n      });\n      delete NewGameEventArray[10];\n      delete NewGameEventArray[11];\n      setGameEventData([...NewGameEventArray]);\n      console.log(\"array below\");\n      console.log(prevData);\n      prevData = NewGameEventArray;\n    };\n\n    clients.forEach(e => {\n      console.log(\"Adding PLayer \" + e);\n      let cube = MakeCube(e.color, e.name);\n      players[e] = cube;\n    });\n    socket.on('NewPlayer', (id, data) => {\n      console.log(data);\n      console.log(\"New PLyer \" + id);\n      let cube = MakeCube(data.color, data.name);\n      addtoGameFeed(data === null || data === void 0 ? void 0 : data.name, \"Joined the game!\");\n      players[id] = cube;\n    });\n    socket.on('LostPLayer', (id, how, data) => {\n      console.log(\"lost PLyer \" + id);\n      let cube = players[id];\n      SceneToGet.remove(cube);\n      delete players[id];\n      console.log(data);\n      addtoGameFeed(data === null || data === void 0 ? void 0 : data.name, how === true ? \"Was removed from the game for being inactive\" : \"Left the game!\");\n    });\n    socket.on('PlayerLocationUpdate', (id, pos, rot, data) => {\n      let cube = players[id];\n\n      if (cube) {\n        cube.rotation.set(rot._x, rot._y, rot._z);\n        cube.position.set(pos.x, pos.y, pos.z);\n      } else {\n        let cube = MakeCube(data === null || data === void 0 ? void 0 : data.color, data === null || data === void 0 ? void 0 : data.name);\n        players[id] = cube;\n      }\n    });\n    socket.on(\"NewChat\", (data, text) => {\n      addtoGameFeed(data.name, text);\n    });\n    setInterval(() => {\n      socket.emit('LocationUpdate', Camera.position, Camera.rotation);\n    }, 10);\n\n    var animate = function () {\n      stats.begin();\n      requestAnimationFrame(animate);\n      daynight.update();\n      clouds.forEach((e, i) => {\n        e.update();\n      });\n\n      if (w) {\n        var direction = new THREE.Vector3();\n        Camera.getWorldDirection(direction);\n        Camera.position.add(direction.multiplyScalar(shift == 1 ? 1 : 0.25)); //Camera.position.z -= 0.1\n      }\n\n      if (s) {\n        var direction = new THREE.Vector3();\n        Camera.getWorldDirection(direction);\n        Camera.position.add(direction.multiplyScalar(-(shift == 1 ? 1 : 0.25)));\n      }\n\n      if (a) {\n        Camera.rotateY(0.04 * shift);\n      }\n\n      if (d) {\n        Camera.rotateY(-0.04 * shift);\n      }\n\n      if (up) {\n        Camera.rotateX(0.04 * shift);\n      }\n\n      if (down) {\n        Camera.rotateX(-0.04 * shift);\n      }\n\n      if (q) {\n        Camera.rotateZ(0.02 * shift);\n      }\n\n      if (e) {\n        Camera.rotateZ(-0.02 * shift);\n      }\n\n      Renders.render(SceneToGet, Camera);\n      stats.end();\n    };\n\n    function listChildren(children) {\n      let child;\n\n      for (let i = 0; i < children.length; i++) {\n        child = children[i]; // Calls this function again if the child has children\n\n        if (child.children) {\n          listChildren(child.children);\n        } // Logs if this child last in recursion\n        else {\n            console.log('Reached bottom with: ', child);\n          }\n      }\n    }\n\n    listChildren(SceneToGet.children);\n    animate();\n  }, [child, clients]);\n\n  let sendChat = e => {\n    e.preventDefault();\n    socket.emit(\"sendChat\", child2.value);\n    child2.value = \"\";\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        position: \"fixed\",\n        marginTop: \"40px\",\n        color: \"white\"\n      },\n      children: personData === undefined ? \"LOADING...\" : personData.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"100vw\",\n        height: \"100vh\",\n        position: \"fixed\",\n        marginTop: \"80px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: sendChat,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: ref => setChild2(ref)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 17\n      }, this), [...gameEventData].map(e => {\n        if (e == undefined) return;\n        return /*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            color: \"white\"\n          },\n          children: [e.name, \" - \", e.event]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 21\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }, this), (_ref = recievedSeed === undefined) !== null && _ref !== void 0 ? _ref : /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"LOADING SEED!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 45\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: ref => setChild(ref)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 292,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"sources":["/Users/year12/Desktop/Harvey/alevel_2020-2021/pages/test.js"],"names":["useEffect","useState","useContext","THREE","CameraControls","BoxGeometry","Clock","DoubleSide","Material","Mesh","MeshBasicMaterial","MeshStandardMaterial","PerspectiveCamera","PointLight","Scene","Vector3","WebGLRenderer","MeshLambertMaterial","perlin","require","SimplexNoise","GenerateClouds","getRandomStarField","CreateDayNightCycle","Stats","useAppContext","GenerateLabel","GenerateTerrain","install","render","child","setChild","undefined","gameEventData","setGameEventData","newTheta","setTheat","day","setDay","child2","setChild2","pos","setPos","rot","setRot","socket","recievedSeed","setSeed","rendered","setRendered","clients","setClients","personData","setPersonalData","latestPerson","setLatestestPerson","once","seed","client","data","console","log","stats","showPanel","document","body","appendChild","dom","SceneToGet","Renders","antialias","alpha","setClearColor","setSize","window","innerWidth","innerHeight","domElement","planeGeometry","PlaneGeometry","rotateX","Math","PI","planeMaterial","color","side","plane","position","y","add","daynight","clouds","i","push","random","Camera","w","a","s","d","up","down","e","q","shift","addEventListener","onDocumentKeyDown","event","val","activeElement","keyCode","which","requestPointerLock","gridHelper","GridHelper","players","MakeCube","name","group","Group","geometry","material","Color","emissive","cube","cyclinder","CylinderGeometry","material2","cylinderBuild","set","prevData","addtoGameFeed","NewGameEventArray","unshift","forEach","on","id","how","remove","rotation","_x","_y","_z","x","z","text","setInterval","emit","animate","begin","requestAnimationFrame","update","direction","getWorldDirection","multiplyScalar","rotateY","rotateZ","end","listChildren","children","length","sendChat","preventDefault","value","marginTop","width","height","ref","map"],"mappings":"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","sourcesContent":["// Written By Harvey Randall \\\\\n\nimport { useEffect, useState, useContext } from \"react\"\nimport * as THREE from 'three';\nimport CameraControls from 'camera-controls';\nimport { BoxGeometry, Clock, DoubleSide, Material, Mesh, MeshBasicMaterial, MeshStandardMaterial, PerspectiveCamera, PointLight, Scene, Vector3, WebGLRenderer, MeshLambertMaterial } from \"three\"\nvar perlin = require('perlin-noise');\nvar SimplexNoise = require('simplex-noise');\nimport { GenerateClouds } from '../components/clouds'\nimport { getRandomStarField } from '../components/stars'\nimport { CreateDayNightCycle } from \"../components/gameFundalmentals/DayNightCycle\";\nvar Stats = require('stats.js')\nimport { useAppContext } from '../components/contextHandler'\nimport { GenerateLabel } from '../components/nametag'\nimport { GenerateTerrain } from \"../components/gameFundalmentals/ProceduleTerrain\";\nCameraControls.install({ THREE: THREE });\n\n\nexport default function render() {\n    const [child, setChild] = useState(undefined)\n    const [gameEventData, setGameEventData] = useState([])\n\n    const [newTheta, setTheat] = useState(0)\n    const [day, setDay] = useState(\"not day\")\n    const [child2, setChild2] = useState(undefined)\n    const [pos, setPos] = useState(undefined)\n    const [rot, setRot] = useState(undefined)\n    const socket = useAppContext()\n    const [recievedSeed, setSeed] = useState(undefined)\n    const [rendered, setRendered] = useState(false)\n    const [clients, setClients] = useState([])\n    const [personData, setPersonalData] = useState(undefined)\n    const [latestPerson, setLatestestPerson] = useState([])\n\n    socket.once(\"welcome\", (seed, client, data) => {\n        setSeed(seed)\n        console.log(client)\n        setClients(client)\n        setPersonalData(data)\n    });\n\n    useEffect(() => {\n        if (child === undefined || recievedSeed === undefined || rendered === true) return;\n        setRendered(true)\n\n        let stats = new Stats();\n        stats.showPanel(1); // 0: fps, 1: ms, 2: mb, 3+: custom\n        document.body.appendChild(stats.dom);\n\n        let SceneToGet = new Scene()\n        let Renders = new WebGLRenderer({\n            antialias: true,\n            alpha: true\n        })\n\n        Renders.setClearColor(0x87ceeb, 1);\n\n\n        Renders.setSize(window.innerWidth, window.innerHeight)\n        child.appendChild(Renders.domElement);\n\n\n        GenerateTerrain(recievedSeed, SceneToGet)\n\n\n\n\n        const planeGeometry = new THREE.PlaneGeometry(20, 20, 32, 32);\n        planeGeometry.rotateX(Math.PI / 2)\n        const planeMaterial = new THREE.MeshStandardMaterial({ color: 0x567d46, side: DoubleSide })\n        const plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.position.y = -0.5\n        SceneToGet.add(plane);\n\n        let daynight = new CreateDayNightCycle(SceneToGet, Renders)\n\n\n        let clouds = []\n        for (let i = 0; i < 40; i++) {\n            clouds.push(new GenerateClouds(new Vector3((Math.random() * 300) - 300, 80 + Math.random() * 20, (Math.random() * 600) - 400), SceneToGet, Math.random() * 0.2, Math.random() * 6 + 1))\n        }\n        var Camera = new PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)\n        /*const cameraControls = new CameraControls(Camera, Renders.domElement);\n        cameraControls.azimuthRotateSpeed = -0.3; // negative value to invert rotation direction\n        cameraControls.polarRotateSpeed = -0.3; // negative value to invert rotation direction\n        cameraControls.truckSpeed = 1 / 1e-5 * 3;\n        cameraControls.distance = 5\n        //cameraControls.touches.two = CameraControls.ACTION.TOUCH_ZOOM_TRUCK;\n        cameraControls.saveState();*/\n        //Camera.position.z = 5;\n\n        let [w, a, s, d, up, down, e, q, shift] = [false, false, false, false, false, false, false, false, 1]\n\n        document.addEventListener(\"keydown\", (e) => { onDocumentKeyDown(e, true) }, false);\n        document.addEventListener(\"keyup\", (e) => { onDocumentKeyDown(e, false) }, false);\n\n        function onDocumentKeyDown(event, val) {\n            if(child2 === document.activeElement) return\n            var keyCode = event.which;\n            if (keyCode == 87) {\n                w = val\n            }\n            if (keyCode == 83) {\n                s = val\n            }\n            if (keyCode == 65) {\n                a = val\n            }\n            if (keyCode == 68) {\n                d = val\n            }\n            if (keyCode == 38) {\n                up = val\n            }\n            if (keyCode == 40) {\n                down = val\n            }\n            if (keyCode == 69) {\n                e = val\n            }\n            if (keyCode == 81) {\n                q = val\n            }\n            if (keyCode == 16) {\n                shift = val ? 0.5 : 1\n            }\n        };\n\n\n\n        Renders.domElement.requestPointerLock()\n\n        const gridHelper = new THREE.GridHelper(50, 50);\n        gridHelper.position.y = -1;\n        SceneToGet.add(gridHelper);\n        let players = []\n\n        function MakeCube(color = \"rgb(0,0,0)\", name = \"unkown\") {\n            const group = new THREE.Group();\n            const geometry = new THREE.BoxGeometry(1, 1, 1);\n            const material = new THREE.MeshLambertMaterial({ color: new THREE.Color(color), emissive: new THREE.Color(color) });\n            const cube = new THREE.Mesh(geometry, material);\n            group.add(cube)\n            const cyclinder = new THREE.CylinderGeometry(0.3, 0.3, 0.6, 30);\n            const material2 = new THREE.MeshLambertMaterial({ color: 0x000000 });\n            const cylinderBuild = new THREE.Mesh(cyclinder, material2);\n            cylinderBuild.rotateX((Math.PI / 2) + Math.PI)\n            cylinderBuild.position.set(0, 0, -0.6)\n            group.add(cylinderBuild)\n\n            GenerateLabel(name, group)\n            SceneToGet.add(group)\n            group.name = name\n            return group\n        }\n\n        console.log(clients)\n        let prevData = []\n\n        let addtoGameFeed = (name = \"Unkown\", event) => {\n            let NewGameEventArray = [...prevData]\n            console.log(NewGameEventArray)\n            NewGameEventArray.unshift({ name: name, event: event })\n            delete NewGameEventArray[10]\n            delete NewGameEventArray[11]\n            setGameEventData([...NewGameEventArray])\n            console.log(\"array below\")\n            console.log(prevData)\n            prevData = NewGameEventArray\n        }\n\n        clients.forEach(e => {\n            console.log(\"Adding PLayer \" + e)\n            let cube = MakeCube(e.color, e.name)\n            players[e] = cube\n        })\n\n        socket.on('NewPlayer', (id, data) => {\n            console.log(data)\n            console.log(\"New PLyer \" + id)\n            let cube = MakeCube(data.color, data.name)\n            addtoGameFeed(data?.name, \"Joined the game!\")\n\n            players[id] = cube\n        })\n\n        socket.on('LostPLayer', (id, how, data) => {\n            console.log(\"lost PLyer \" + id)\n            let cube = players[id]\n            SceneToGet.remove(cube)\n            delete players[id]\n            console.log(data)\n            addtoGameFeed(data?.name, how === true ? \"Was removed from the game for being inactive\" : \"Left the game!\")\n        })\n\n        socket.on('PlayerLocationUpdate', (id, pos, rot, data) => {\n            let cube = players[id]\n            if (cube) {\n                cube.rotation.set(rot._x, rot._y, rot._z)\n                cube.position.set(pos.x, pos.y, pos.z)\n            }\n            else {\n                let cube = MakeCube(data?.color, data?.name)\n\n                players[id] = cube\n\n            }\n\n        })\n        socket.on(\"NewChat\", (data, text) => {\n            addtoGameFeed(data.name, text)\n        })\n        setInterval(() => {\n            socket.emit('LocationUpdate', Camera.position, Camera.rotation)\n        }, 10)\n\n\n        var animate = function() {\n            stats.begin()\n            requestAnimationFrame(animate)\n\n            daynight.update()\n\n\n            clouds.forEach((e, i) => {\n                e.update()\n            })\n\n            if (w) {\n                var direction = new THREE.Vector3();\n                Camera.getWorldDirection(direction);\n                Camera.position.add(direction.multiplyScalar(shift == 1 ? 1 : 0.25));\n                //Camera.position.z -= 0.1\n            }\n            if (s) {\n                var direction = new THREE.Vector3();\n                Camera.getWorldDirection(direction);\n                Camera.position.add(direction.multiplyScalar(-(shift == 1 ? 1 : 0.25)));\n            }\n            if (a) {\n                Camera.rotateY(0.04 * shift)\n            }\n            if (d) {\n                Camera.rotateY(-0.04 * shift)\n            }\n            if (up) {\n                Camera.rotateX(0.04 * shift)\n            }\n            if (down) {\n                Camera.rotateX(-0.04 * shift)\n            }\n            if (q) {\n                Camera.rotateZ(0.02 * shift)\n            }\n            if (e) {\n                Camera.rotateZ(-0.02 * shift)\n            }\n\n\n\n            Renders.render(SceneToGet, Camera);\n            stats.end()\n        };\n\n        function listChildren(children) {\n            let child;\n            for (let i = 0; i < children.length; i++) {\n                child = children[i];\n\n                // Calls this function again if the child has children\n                if (child.children) {\n                    listChildren(child.children);\n                }\n                // Logs if this child last in recursion\n                else {\n                    console.log('Reached bottom with: ', child);\n                }\n            }\n        }\n\n        listChildren(SceneToGet.children);\n        animate();\n    }, [child, clients])\n    \n    let sendChat = (e) => {\n        e.preventDefault()\n        socket.emit(\"sendChat\", child2.value)\n        child2.value = \"\"\n    }\n\n    return (\n        <main >\n            <h1 style={{position:\"fixed\", marginTop:\"40px\", color:\"white\"}}>{personData === undefined ? \"LOADING...\" : personData.name}</h1>\n            <div style={{width:\"100vw\", height:\"100vh\", position:\"fixed\", marginTop:\"80px\"}}>\n                <form  onSubmit={sendChat}>\n                    <input ref={ref => (setChild2(ref))}></input>\n                    <input type=\"Submit\"></input>\n                </form>\n                {[...gameEventData].map((e) => {\n                if(e == undefined) return;\n                return(\n                    <h4 style={{color:\"white\"}}>{e.name} - {e.event}</h4>\n                )}) }\n                \n            </div>\n            { recievedSeed === undefined ?? <h1>LOADING SEED!</h1>}\n            <div ref = { ref => (setChild(ref)) }></div>  \n        </main>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}